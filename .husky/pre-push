#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Running tests before push..."

# Run tests for frontend (Next.js)
echo "ğŸ§ª Running frontend tests..."
cd frontend && npm test
FE_STATUS=$?
cd ..

# Run tests for backend (NestJS)
echo "ğŸ§ª Running backend tests..."
cd backend && npm test
BE_STATUS=$?
cd ..

# If any test fails, block the push
if [ $FE_STATUS -ne 0 ] || [ $BE_STATUS -ne 0 ]; then
    echo "âŒ Tests failed. Fix them before pushing!"
    exit 1
fi

echo "âœ… All tests passed. Proceeding with push."
